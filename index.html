<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Valentine Game ğŸ’˜</title>
  <style>
    body{
      margin:0;height:100vh;overflow:hidden;
      display:flex;justify-content:center;align-items:center;
      font-family:Arial, sans-serif;
      background:linear-gradient(135deg,#ffd6e0,#fff1f5);
    }
    .card{
      width:min(560px,92vw);
      background:#fff;
      padding:18px 18px 22px;
      border-radius:24px;
      text-align:center;
      box-shadow:0 18px 40px rgba(0,0,0,.14);
      position:relative;
      z-index:2;
    }
    .photo{
      width:155px;height:155px;border-radius:50%;
      object-fit:cover;
      border:5px solid #ffe0e7;
      box-shadow:0 10px 22px rgba(0,0,0,.12);
      margin:6px auto 12px;
      display:block;
    }

    /* progress bar */
    .progressWrap{
      width:100%;
      height:10px;
      background:#f2f2f2;
      border-radius:999px;
      overflow:hidden;
      margin:6px 0 12px;
    }
    .progressBar{
      height:100%;
      width:0%;
      background:#ff4d6d;
      border-radius:999px;
      transition:width .35s ease;
    }

    h1{margin:6px 0 4px;font-size:24px}
    .round{color:#888;font-size:14px;margin-bottom:8px}
    .msg{font-size:16px;color:#333;line-height:1.35;min-height:48px}
    .area{margin-top:14px; min-height:160px; position:relative;}
    .btn{
      padding:12px 18px;
      font-size:16px;
      border:none;border-radius:999px;
      cursor:pointer;
      margin:8px;
      user-select:none;
    }
    .primary{background:#ff4d6d;color:#fff}
    .ghost{background:#eee;color:#333}
    .grid{
      display:flex;flex-wrap:wrap;justify-content:center;gap:10px;
      margin-top:10px;
    }
    .choice{
      min-width:120px;
      background:#f6f6f6;
      border:1px solid #eee;
      border-radius:16px;
      padding:12px 12px;
      cursor:pointer;
      font-size:16px;
    }
    .choice:active{transform:scale(.98)}
    input{
      width:min(360px,86%);
      padding:12px 14px;
      font-size:16px;
      border-radius:14px;
      border:1px solid #ddd;
      outline:none;
    }
    .hint{color:#777;font-size:13px;margin-top:8px;min-height:18px}

    /* floating */
    .floaty{
      position:absolute;
      left:0;top:0;
      pointer-events:none;
      opacity:.78;
      animation:float 6s linear infinite;
    }
    @keyframes float{
      from{transform:translateY(110vh)}
      to{transform:translateY(-10vh)}
    }

    /* tiny summary box at end */
    .summary{
      text-align:left;
      background:#fff5f8;
      border:1px solid #ffe0ea;
      padding:12px 12px;
      border-radius:16px;
      margin-top:12px;
      font-size:14px;
      line-height:1.35;
    }
    .summary b{color:#ff4d6d}
  </style>
</head>
<body>

  <div class="card">
    <img class="photo" id="photo" src="photo1.jpg" alt="Us ğŸ’•" />

    <div class="progressWrap"><div class="progressBar" id="progressBar"></div></div>

    <div class="round" id="roundLabel">Round 1/10</div>
    <h1 id="title">Where is my pookie? ğŸ˜¼</h1>
    <div class="msg" id="msg">Find me! Pick the correct animals.</div>

    <div class="area" id="area"></div>
    <div class="hint" id="hint"></div>
  </div>

<script>
  // ===== Settings =====
  const PHOTOS = ["photo1.jpg","photo2.jpg","photo3.jpg"];
  const SPOTIFY_LINK = "https://open.spotify.com/track/0T5iIrXA4p5GsubkhuBIKV?si=50ba30c673ad4c5c";

  // ===== Elements =====
  const photoEl = document.getElementById("photo");
  const roundLabel = document.getElementById("roundLabel");
  const titleEl = document.getElementById("title");
  const msgEl = document.getElementById("msg");
  const area = document.getElementById("area");
  const hint = document.getElementById("hint");
  const progressBar = document.getElementById("progressBar");

  // ===== Stored answers (shown at end) =====
  const answers = {
    animalPick: "",
    chocolate: "",
    pookieName: "",
    valentineWant: "",
    blushQ: "",
    color: "",
    surprised: ""
  };

  // ===== Helpers =====
  function setHint(t=""){ hint.textContent = t; }
  function setRound(n){
    roundLabel.textContent = `Round ${n}/10`;
    progressBar.style.width = (n/10*100) + "%";
  }
  function setPhotoByRound(n){ photoEl.src = PHOTOS[(n-1) % PHOTOS.length]; }
  function clearArea(){ area.innerHTML = ""; area.style.position = "relative"; }

  function makeChoiceGrid(choices){
    const grid = document.createElement("div");
    grid.className = "grid";
    choices.forEach(c => {
      const b = document.createElement("button");
      b.className = "choice";
      b.type = "button";
      b.innerHTML = c.label;
      b.onclick = c.onClick;
      grid.appendChild(b);
    });
    area.appendChild(grid);
  }

  function makeInput(promptText, placeholder, onSubmitLabel="Next", onSubmit){
    const p = document.createElement("div");
    p.style.marginTop = "6px";
    p.style.marginBottom = "10px";
    p.textContent = promptText;
    area.appendChild(p);

    const inp = document.createElement("input");
    inp.placeholder = placeholder;
    area.appendChild(inp);

    const row = document.createElement("div");
    row.style.marginTop = "12px";
    const btn = document.createElement("button");
    btn.className = "btn primary";
    btn.textContent = onSubmitLabel;
    btn.onclick = () => onSubmit(inp.value);
    row.appendChild(btn);

    area.appendChild(row);
    inp.focus();
  }

  function floatBurst(symbols, durationMs=2200){
    const start = Date.now();
    const timer = setInterval(() => {
      const s = document.createElement("div");
      s.className = "floaty";
      s.textContent = symbols[Math.floor(Math.random()*symbols.length)];
      s.style.left = (Math.random()*100) + "vw";
      s.style.fontSize = (18 + Math.random()*28) + "px";
      document.body.appendChild(s);
      setTimeout(() => s.remove(), 6000);

      if (Date.now() - start > durationMs){
        clearInterval(timer);
      }
    }, 180);
  }

  // ===== Game State =====
  let round = 1;

  function nextRound(){
    round++;
    if (round > 10) round = 10;
    render();
  }

  // Round 5 helpers: run-away buttons
  function runButtonWithinArea(btn){
    const pad = 10;
    const w = area.clientWidth || 300;
    const h = area.clientHeight || 170;
    const x = pad + Math.random() * Math.max(40, (w - 140));
    const y = pad + Math.random() * Math.max(40, (h - 70));
    btn.style.left = x + "px";
    btn.style.top  = y + "px";
  }

  function render(){
    setRound(round);
    setPhotoByRound(round);
    setHint("");
    clearArea();

    // ROUND 1: animal emoji, correct = ğŸ±ğŸ±ğŸ¹
    if (round === 1){
      titleEl.textContent = "Where is my pookie? ğŸ˜¼";
      msgEl.textContent = "Find me! Pick the correct animals (2 cats + hamster).";
      const correct = "ğŸ±ğŸ±ğŸ¹";
      const options = [
        { label:`${correct}`, ok:true },
        { label:"ğŸ¶ğŸ±ğŸ¹", ok:false },
        { label:"ğŸ°ğŸ°ğŸ¹", ok:false },
        { label:"ğŸ±ğŸ­ğŸ­", ok:false },
      ];
      makeChoiceGrid(options.map(o => ({
        label: o.label,
        onClick: () => {
          if (o.ok){
            answers.animalPick = correct;
            setHint("Yesss ğŸ˜ found me!");
            setTimeout(nextRound, 650);
          } else {
            setHint("Nope ğŸ˜ˆ try again");
          }
        }
      })));
      return;
    }

    // ROUND 2: chocolates
    if (round === 2){
      titleEl.textContent = "Valentine chocolate time ğŸ«";
      msgEl.textContent = "Pick one chocolate you want ğŸ˜‹";
      const reactions = {
        "Milka ğŸ«": "Ooo Milkaâ€¦ sweet choice ğŸ˜",
        "Raffaello ğŸ¥¥": "Raffaello?? classy pookie ğŸ’…ğŸ’–",
        "POOKIE ğŸ«ğŸ˜ˆ": "Pookie chocolate?? thatâ€™s MY favorite ğŸ˜­ğŸ’˜"
      };
      makeChoiceGrid(Object.keys(reactions).map(k => ({
        label: k,
        onClick: () => {
          answers.chocolate = k;
          setHint(reactions[k]);
          setTimeout(nextRound, 750);
        }
      })));
      return;
    }

    // ROUND 3: type pookie name
    if (round === 3){
      titleEl.textContent = "Type your pookie name âœï¸";
      msgEl.textContent = "No empty answers ğŸ˜Œ";
      makeInput("Your pookie name:", "Type hereâ€¦", "Submit", (val) => {
        const v = (val||"").trim();
        if (!v) { setHint("Type something ğŸ˜ˆ"); return; }
        answers.pookieName = v;
        setHint(`Okayyy "${v}" ğŸ˜ğŸ’–`);
        setTimeout(nextRound, 650);
      });
      return;
    }

    // ROUND 4: what you want for valentine
    if (round === 4){
      titleEl.textContent = "Question time ğŸ’";
      msgEl.textContent = "What do you want for Valentine?";
      makeInput("Tell me:", "Type your wishâ€¦", "Send", (val) => {
        const v = (val||"").trim();
        if (!v) { setHint("Donâ€™t be shy ğŸ˜Œ type it"); return; }
        answers.valentineWant = v;
        setHint("Noted ğŸ˜ (Iâ€™m listeningâ€¦) ");
        setTimeout(nextRound, 700);
      });
      return;
    }

    // ROUND 5: Are you blushing? YES always runs; NO runs sometimes
    if (round === 5){
      titleEl.textContent = "Are you blushing? ğŸ˜³";
      msgEl.textContent = "Be honestâ€¦";
      setHint("Try to press YES ğŸ˜ˆ");

      area.style.position = "relative";
      area.style.height = "180px";

      const yes = document.createElement("button");
      yes.className = "btn primary";
      yes.textContent = "YES ğŸ˜³";
      yes.style.position = "absolute";
      yes.style.left = "18px";
      yes.style.top = "24px";

      const no = document.createElement("button");
      no.className = "btn ghost";
      no.textContent = "NO ğŸ™ˆ";
      no.style.position = "absolute";
      no.style.right = "18px";
      no.style.top = "24px";

      function runYes(){
        runButtonWithinArea(yes);
        setHint("NOPE ğŸ˜ˆ you canâ€™t catch YES");
      }

      function maybeRunNo(){
        // 45% chance NO also runs away
        if (Math.random() < 0.45){
          // switch to absolute positioning so it can move freely
          no.style.left = (area.clientWidth - 120) + "px";
          no.style.right = "";
          runButtonWithinArea(no);
          setHint("HAHA even NO is scared sometimes ğŸ˜ˆ");
        }
      }

      yes.addEventListener("mouseover", runYes);
      yes.addEventListener("touchstart", (e)=>{ e.preventDefault(); runYes(); });

      // NO runs sometimes when you get close / tap
      no.addEventListener("mouseover", maybeRunNo);
      no.addEventListener("touchstart", (e)=>{ e.preventDefault(); maybeRunNo(); });

      no.onclick = () => {
        answers.blushQ = "NO ğŸ™ˆ (but I know ğŸ˜)";
        setHint("Awww you pressed NOâ€¦ but I know the truth ğŸ˜");
        setTimeout(nextRound, 700);
      };

      area.appendChild(yes);
      area.appendChild(no);
      return;
    }

    // ROUND 6: I can see you blushing
    if (round === 6){
      titleEl.textContent = "I can see youâ€™re blushing ğŸ˜Œ";
      msgEl.textContent = "Donâ€™t hide it, pookie ğŸ’–";
      const btn = document.createElement("button");
      btn.className = "btn primary";
      btn.textContent = "Okayâ€¦ next ğŸ˜³";
      btn.onclick = nextRound;
      area.appendChild(btn);
      return;
    }

    // ROUND 7: hearts + flowers + pick your colour
    if (round === 7){
      titleEl.textContent = "Sending you love ğŸŒ¸ğŸ’˜";
      msgEl.textContent = "Hearts and flowers for youâ€¦ now press your colour!";
      floatBurst(["ğŸ’–","ğŸ’•","ğŸŒ¹","ğŸŒ·","ğŸ’","â¤ï¸","ğŸ’˜"], 2400);

      const colors = [
        { name:"Pink ğŸ’—", react:"Pink suits you sooo much ğŸ˜" },
        { name:"Red â¤ï¸", react:"Red = spicy love ğŸ˜ˆâ¤ï¸" },
        { name:"Purple ğŸ’œ", react:"Purple pookie vibe ğŸ’œâœ¨" },
        { name:"Blue ğŸ’™", react:"Blue = calm + cute ğŸ˜ŒğŸ’™" }
      ];

      makeChoiceGrid(colors.map(c => ({
        label: c.name,
        onClick: () => {
          answers.color = c.name;
          setHint(c.react);
          setTimeout(nextRound, 750);
        }
      })));
      return;
    }

    // ROUND 8: closer message
    if (round === 8){
      titleEl.textContent = "Youâ€™re closerâ€¦ ğŸ’";
      msgEl.textContent = "I mean close to me as always <3";
      const btn = document.createElement("button");
      btn.className = "btn primary";
      btn.textContent = "Aww ğŸ¥º next";
      btn.onclick = nextRound;
      area.appendChild(btn);
      return;
    }

    // ROUND 9: surprised question
    if (round === 9){
      titleEl.textContent = "Are you surprised? ğŸ˜¯";
      msgEl.textContent = "Tell me honestly!";
      makeChoiceGrid([
        { label:"YES ğŸ˜", onClick: () => { answers.surprised="YES ğŸ˜"; setHint("Hehe good ğŸ˜ˆ"); setTimeout(nextRound, 650);} },
        { label:"NO ğŸ˜Œ",  onClick: () => { answers.surprised="NO ğŸ˜Œ";  setHint("Okay miss strong ğŸ˜"); setTimeout(nextRound, 650);} }
      ]);
      return;
    }

    // ROUND 10: final + show stored answers
    if (round === 10){
      titleEl.textContent = "YOU GOT ME ğŸ’˜";
      msgEl.innerHTML = `
        <b>You got me, I LOVE YOU.</b><br>
        Yuta is here for you, love you forever baby &lt;3
      `;
      floatBurst(["ğŸ’–","ğŸ’•","â¤ï¸","ğŸ’˜","ğŸŒ¹","ğŸ’"], 2600);

      const summary = document.createElement("div");
      summary.className = "summary";
      summary.innerHTML = `
        <b>Your choices:</b><br>
        â€¢ Animals: ${answers.animalPick || "â€”"}<br>
        â€¢ Chocolate: ${answers.chocolate || "â€”"}<br>
        â€¢ Pookie name: ${answers.pookieName || "â€”"}<br>
        â€¢ Valentine wish: ${answers.valentineWant || "â€”"}<br>
        â€¢ Blushing: ${answers.blushQ || "â€”"}<br>
        â€¢ Colour: ${answers.color || "â€”"}<br>
        â€¢ Surprised: ${answers.surprised || "â€”"}
      `;
      area.appendChild(summary);

    // --- Spotify embed (shows under Round 10, manual play) ---
const spotifyBox = document.createElement("div");
spotifyBox.style.marginTop = "16px";
spotifyBox.innerHTML = `
  <iframe
    data-testid="embed-iframe"
    style="border-radius:12px"
    src="https://open.spotify.com/embed/album/1a43UOca3qYS1ZcS0b9wSk"
    width="100%"
    height="352"
    frameborder="0"
    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
    loading="lazy">
  </iframe>

  <div style="font-size:13px;color:#777;margin-top:6px;">
    â–¶ Tap play to hear the best part ğŸ’–
  </div>
`;
area.appendChild(spotifyBox);


// --- Auto-open Spotify app after 2 seconds (so hearts/ending is visible first) ---
setTimeout(() => {
  // try open app
  window.location.href = `spotify:track:${trackId}`;

  // fallback to web if app not installed / blocked
  setTimeout(() => {
    window.location.href = `https://open.spotify.com/track/${trackId}`;
  }, 1200);
}, 2000);


      const btnRow = document.createElement("div");
      const replay = document.createElement("button");
      replay.className = "btn primary";
      replay.textContent = "Replay ğŸ˜ˆ";
      replay.onclick = () => { round = 1; render(); };
      btnRow.appendChild(replay);
      area.appendChild(btnRow);
      return;
    }
  }

  render();
</script>
</body>
</html>
